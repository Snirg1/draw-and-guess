{"ast":null,"code":"// src/use-descendant.ts\nimport { createContext } from \"@chakra-ui/react-context\";\nimport { mergeRefs } from \"@chakra-ui/react-use-merge-refs\";\nimport { useRef, useState } from \"react\"; // src/utils.ts\n\nimport { useEffect, useLayoutEffect } from \"react\";\n\nfunction sortNodes(nodes) {\n  return nodes.sort((a, b) => {\n    const compare = a.compareDocumentPosition(b);\n\n    if (compare & Node.DOCUMENT_POSITION_FOLLOWING || compare & Node.DOCUMENT_POSITION_CONTAINED_BY) {\n      return -1;\n    }\n\n    if (compare & Node.DOCUMENT_POSITION_PRECEDING || compare & Node.DOCUMENT_POSITION_CONTAINS) {\n      return 1;\n    }\n\n    if (compare & Node.DOCUMENT_POSITION_DISCONNECTED || compare & Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC) {\n      throw Error(\"Cannot sort the given nodes.\");\n    } else {\n      return 0;\n    }\n  });\n}\n\nvar isElement = el => typeof el == \"object\" && \"nodeType\" in el && el.nodeType === Node.ELEMENT_NODE;\n\nfunction getNextIndex(current, max, loop) {\n  let next = current + 1;\n  if (loop && next >= max) next = 0;\n  return next;\n}\n\nfunction getPrevIndex(current, max, loop) {\n  let next = current - 1;\n  if (loop && next < 0) next = max;\n  return next;\n}\n\nvar useSafeLayoutEffect = typeof window !== \"undefined\" ? useLayoutEffect : useEffect;\n\nvar cast = value => value; // src/descendant.ts\n\n\nvar DescendantsManager = class {\n  descendants = /* @__PURE__ */new Map();\n  register = nodeOrOptions => {\n    if (nodeOrOptions == null) return;\n\n    if (isElement(nodeOrOptions)) {\n      return this.registerNode(nodeOrOptions);\n    }\n\n    return node => {\n      this.registerNode(node, nodeOrOptions);\n    };\n  };\n  unregister = node => {\n    this.descendants.delete(node);\n    const sorted = sortNodes(Array.from(this.descendants.keys()));\n    this.assignIndex(sorted);\n  };\n  destroy = () => {\n    this.descendants.clear();\n  };\n  assignIndex = descendants => {\n    this.descendants.forEach(descendant => {\n      const index = descendants.indexOf(descendant.node);\n      descendant.index = index;\n      descendant.node.dataset[\"index\"] = descendant.index.toString();\n    });\n  };\n  count = () => this.descendants.size;\n  enabledCount = () => this.enabledValues().length;\n  values = () => {\n    const values = Array.from(this.descendants.values());\n    return values.sort((a, b) => a.index - b.index);\n  };\n  enabledValues = () => {\n    return this.values().filter(descendant => !descendant.disabled);\n  };\n  item = index => {\n    if (this.count() === 0) return void 0;\n    return this.values()[index];\n  };\n  enabledItem = index => {\n    if (this.enabledCount() === 0) return void 0;\n    return this.enabledValues()[index];\n  };\n  first = () => this.item(0);\n  firstEnabled = () => this.enabledItem(0);\n  last = () => this.item(this.descendants.size - 1);\n  lastEnabled = () => {\n    const lastIndex = this.enabledValues().length - 1;\n    return this.enabledItem(lastIndex);\n  };\n  indexOf = node => {\n    var _a;\n\n    if (!node) return -1;\n    return ((_a = this.descendants.get(node)) == null ? void 0 : _a.index) ?? -1;\n  };\n  enabledIndexOf = node => {\n    if (node == null) return -1;\n    return this.enabledValues().findIndex(i => i.node.isSameNode(node));\n  };\n  next = (() => {\n    var _this = this;\n\n    return function (index) {\n      let loop = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      const next = getNextIndex(index, _this.count(), loop);\n      return _this.item(next);\n    };\n  })();\n  nextEnabled = (() => {\n    var _this2 = this;\n\n    return function (index) {\n      let loop = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n      const item = _this2.item(index);\n\n      if (!item) return;\n\n      const enabledIndex = _this2.enabledIndexOf(item.node);\n\n      const nextEnabledIndex = getNextIndex(enabledIndex, _this2.enabledCount(), loop);\n      return _this2.enabledItem(nextEnabledIndex);\n    };\n  })();\n  prev = (() => {\n    var _this3 = this;\n\n    return function (index) {\n      let loop = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      const prev = getPrevIndex(index, _this3.count() - 1, loop);\n      return _this3.item(prev);\n    };\n  })();\n  prevEnabled = (() => {\n    var _this4 = this;\n\n    return function (index) {\n      let loop = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n      const item = _this4.item(index);\n\n      if (!item) return;\n\n      const enabledIndex = _this4.enabledIndexOf(item.node);\n\n      const prevEnabledIndex = getPrevIndex(enabledIndex, _this4.enabledCount() - 1, loop);\n      return _this4.enabledItem(prevEnabledIndex);\n    };\n  })();\n  registerNode = (node, options) => {\n    if (!node || this.descendants.has(node)) return;\n    const keys = Array.from(this.descendants.keys()).concat(node);\n    const sorted = sortNodes(keys);\n\n    if (options == null ? void 0 : options.disabled) {\n      options.disabled = !!options.disabled;\n    }\n\n    const descendant = {\n      node,\n      index: -1,\n      ...options\n    };\n    this.descendants.set(node, descendant);\n    this.assignIndex(sorted);\n  };\n}; // src/use-descendant.ts\n\nfunction useDescendants() {\n  const descendants = useRef(new DescendantsManager());\n  useSafeLayoutEffect(() => {\n    return () => descendants.current.destroy();\n  });\n  return descendants.current;\n}\n\nvar [DescendantsContextProvider, useDescendantsContext] = createContext({\n  name: \"DescendantsProvider\",\n  errorMessage: \"useDescendantsContext must be used within DescendantsProvider\"\n});\n\nfunction useDescendant(options) {\n  const descendants = useDescendantsContext();\n  const [index, setIndex] = useState(-1);\n  const ref = useRef(null);\n  useSafeLayoutEffect(() => {\n    return () => {\n      if (!ref.current) return;\n      descendants.unregister(ref.current);\n    };\n  }, []);\n  useSafeLayoutEffect(() => {\n    if (!ref.current) return;\n    const dataIndex = Number(ref.current.dataset[\"index\"]);\n\n    if (index != dataIndex && !Number.isNaN(dataIndex)) {\n      setIndex(dataIndex);\n    }\n  });\n  const refCallback = options ? cast(descendants.register(options)) : cast(descendants.register);\n  return {\n    descendants,\n    index,\n    enabledIndex: descendants.enabledIndexOf(ref.current),\n    register: mergeRefs(refCallback, ref)\n  };\n}\n\nfunction createDescendantContext() {\n  const ContextProvider = cast(DescendantsContextProvider);\n\n  const _useDescendantsContext = () => cast(useDescendantsContext());\n\n  const _useDescendant = options => useDescendant(options);\n\n  const _useDescendants = () => useDescendants();\n\n  return [ContextProvider, _useDescendantsContext, _useDescendants, _useDescendant];\n}\n\nexport { createDescendantContext, createDescendantContext as default };","map":{"version":3,"sources":["/Users/Snirgu1/Desktop/draw-and-guess/client/node_modules/@chakra-ui/descendant/dist/index.esm.js"],"names":["createContext","mergeRefs","useRef","useState","useEffect","useLayoutEffect","sortNodes","nodes","sort","a","b","compare","compareDocumentPosition","Node","DOCUMENT_POSITION_FOLLOWING","DOCUMENT_POSITION_CONTAINED_BY","DOCUMENT_POSITION_PRECEDING","DOCUMENT_POSITION_CONTAINS","DOCUMENT_POSITION_DISCONNECTED","DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC","Error","isElement","el","nodeType","ELEMENT_NODE","getNextIndex","current","max","loop","next","getPrevIndex","useSafeLayoutEffect","window","cast","value","DescendantsManager","descendants","Map","register","nodeOrOptions","registerNode","node","unregister","delete","sorted","Array","from","keys","assignIndex","destroy","clear","forEach","descendant","index","indexOf","dataset","toString","count","size","enabledCount","enabledValues","length","values","filter","disabled","item","enabledItem","first","firstEnabled","last","lastEnabled","lastIndex","_a","get","enabledIndexOf","findIndex","i","isSameNode","nextEnabled","enabledIndex","nextEnabledIndex","prev","prevEnabled","prevEnabledIndex","options","has","concat","set","useDescendants","DescendantsContextProvider","useDescendantsContext","name","errorMessage","useDescendant","setIndex","ref","dataIndex","Number","isNaN","refCallback","createDescendantContext","ContextProvider","_useDescendantsContext","_useDescendant","_useDescendants","default"],"mappings":"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","sourcesContent":["// src/use-descendant.ts\nimport { createContext } from \"@chakra-ui/react-context\";\nimport { mergeRefs } from \"@chakra-ui/react-use-merge-refs\";\nimport { useRef, useState } from \"react\";\n\n// src/utils.ts\nimport { useEffect, useLayoutEffect } from \"react\";\nfunction sortNodes(nodes) {\n  return nodes.sort((a, b) => {\n    const compare = a.compareDocumentPosition(b);\n    if (compare & Node.DOCUMENT_POSITION_FOLLOWING || compare & Node.DOCUMENT_POSITION_CONTAINED_BY) {\n      return -1;\n    }\n    if (compare & Node.DOCUMENT_POSITION_PRECEDING || compare & Node.DOCUMENT_POSITION_CONTAINS) {\n      return 1;\n    }\n    if (compare & Node.DOCUMENT_POSITION_DISCONNECTED || compare & Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC) {\n      throw Error(\"Cannot sort the given nodes.\");\n    } else {\n      return 0;\n    }\n  });\n}\nvar isElement = (el) => typeof el == \"object\" && \"nodeType\" in el && el.nodeType === Node.ELEMENT_NODE;\nfunction getNextIndex(current, max, loop) {\n  let next = current + 1;\n  if (loop && next >= max)\n    next = 0;\n  return next;\n}\nfunction getPrevIndex(current, max, loop) {\n  let next = current - 1;\n  if (loop && next < 0)\n    next = max;\n  return next;\n}\nvar useSafeLayoutEffect = typeof window !== \"undefined\" ? useLayoutEffect : useEffect;\nvar cast = (value) => value;\n\n// src/descendant.ts\nvar DescendantsManager = class {\n  descendants = /* @__PURE__ */ new Map();\n  register = (nodeOrOptions) => {\n    if (nodeOrOptions == null)\n      return;\n    if (isElement(nodeOrOptions)) {\n      return this.registerNode(nodeOrOptions);\n    }\n    return (node) => {\n      this.registerNode(node, nodeOrOptions);\n    };\n  };\n  unregister = (node) => {\n    this.descendants.delete(node);\n    const sorted = sortNodes(Array.from(this.descendants.keys()));\n    this.assignIndex(sorted);\n  };\n  destroy = () => {\n    this.descendants.clear();\n  };\n  assignIndex = (descendants) => {\n    this.descendants.forEach((descendant) => {\n      const index = descendants.indexOf(descendant.node);\n      descendant.index = index;\n      descendant.node.dataset[\"index\"] = descendant.index.toString();\n    });\n  };\n  count = () => this.descendants.size;\n  enabledCount = () => this.enabledValues().length;\n  values = () => {\n    const values = Array.from(this.descendants.values());\n    return values.sort((a, b) => a.index - b.index);\n  };\n  enabledValues = () => {\n    return this.values().filter((descendant) => !descendant.disabled);\n  };\n  item = (index) => {\n    if (this.count() === 0)\n      return void 0;\n    return this.values()[index];\n  };\n  enabledItem = (index) => {\n    if (this.enabledCount() === 0)\n      return void 0;\n    return this.enabledValues()[index];\n  };\n  first = () => this.item(0);\n  firstEnabled = () => this.enabledItem(0);\n  last = () => this.item(this.descendants.size - 1);\n  lastEnabled = () => {\n    const lastIndex = this.enabledValues().length - 1;\n    return this.enabledItem(lastIndex);\n  };\n  indexOf = (node) => {\n    var _a;\n    if (!node)\n      return -1;\n    return ((_a = this.descendants.get(node)) == null ? void 0 : _a.index) ?? -1;\n  };\n  enabledIndexOf = (node) => {\n    if (node == null)\n      return -1;\n    return this.enabledValues().findIndex((i) => i.node.isSameNode(node));\n  };\n  next = (index, loop = true) => {\n    const next = getNextIndex(index, this.count(), loop);\n    return this.item(next);\n  };\n  nextEnabled = (index, loop = true) => {\n    const item = this.item(index);\n    if (!item)\n      return;\n    const enabledIndex = this.enabledIndexOf(item.node);\n    const nextEnabledIndex = getNextIndex(enabledIndex, this.enabledCount(), loop);\n    return this.enabledItem(nextEnabledIndex);\n  };\n  prev = (index, loop = true) => {\n    const prev = getPrevIndex(index, this.count() - 1, loop);\n    return this.item(prev);\n  };\n  prevEnabled = (index, loop = true) => {\n    const item = this.item(index);\n    if (!item)\n      return;\n    const enabledIndex = this.enabledIndexOf(item.node);\n    const prevEnabledIndex = getPrevIndex(enabledIndex, this.enabledCount() - 1, loop);\n    return this.enabledItem(prevEnabledIndex);\n  };\n  registerNode = (node, options) => {\n    if (!node || this.descendants.has(node))\n      return;\n    const keys = Array.from(this.descendants.keys()).concat(node);\n    const sorted = sortNodes(keys);\n    if (options == null ? void 0 : options.disabled) {\n      options.disabled = !!options.disabled;\n    }\n    const descendant = { node, index: -1, ...options };\n    this.descendants.set(node, descendant);\n    this.assignIndex(sorted);\n  };\n};\n\n// src/use-descendant.ts\nfunction useDescendants() {\n  const descendants = useRef(new DescendantsManager());\n  useSafeLayoutEffect(() => {\n    return () => descendants.current.destroy();\n  });\n  return descendants.current;\n}\nvar [DescendantsContextProvider, useDescendantsContext] = createContext({\n  name: \"DescendantsProvider\",\n  errorMessage: \"useDescendantsContext must be used within DescendantsProvider\"\n});\nfunction useDescendant(options) {\n  const descendants = useDescendantsContext();\n  const [index, setIndex] = useState(-1);\n  const ref = useRef(null);\n  useSafeLayoutEffect(() => {\n    return () => {\n      if (!ref.current)\n        return;\n      descendants.unregister(ref.current);\n    };\n  }, []);\n  useSafeLayoutEffect(() => {\n    if (!ref.current)\n      return;\n    const dataIndex = Number(ref.current.dataset[\"index\"]);\n    if (index != dataIndex && !Number.isNaN(dataIndex)) {\n      setIndex(dataIndex);\n    }\n  });\n  const refCallback = options ? cast(descendants.register(options)) : cast(descendants.register);\n  return {\n    descendants,\n    index,\n    enabledIndex: descendants.enabledIndexOf(ref.current),\n    register: mergeRefs(refCallback, ref)\n  };\n}\nfunction createDescendantContext() {\n  const ContextProvider = cast(DescendantsContextProvider);\n  const _useDescendantsContext = () => cast(useDescendantsContext());\n  const _useDescendant = (options) => useDescendant(options);\n  const _useDescendants = () => useDescendants();\n  return [\n    ContextProvider,\n    _useDescendantsContext,\n    _useDescendants,\n    _useDescendant\n  ];\n}\nexport {\n  createDescendantContext,\n  createDescendantContext as default\n};\n"]},"metadata":{},"sourceType":"module"}